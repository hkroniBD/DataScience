# **ğŸ“Œ Lecture 10.3: Working with Time Series Data**  

## **ğŸ“¢ Learning Objectives:**  
By the end of this lecture, you will learn:  
âœ… How to handle date-time data using Pandas (`pd.to_datetime()`, `resample()`)  
âœ… Time-based indexing and slicing  
âœ… Applying rolling and moving averages  

**Prerequisites:**  
- Basic knowledge of Pandas  
- Understanding of indexing and slicing in DataFrames  

---

## **ğŸ”¹ 1. Introduction to Time Series Data**  

**What is Time Series Data?**  
ğŸ“Œ Time series data is a sequence of data points collected **over time** at regular or irregular intervals.  

**Examples:**  
âœ”ï¸ Stock prices ğŸ“ˆ  
âœ”ï¸ Temperature readings ğŸŒ¡ï¸  
âœ”ï¸ Website traffic ğŸš¦  
âœ”ï¸ Sales data ğŸ“Š  

ğŸ’¡ **Why is Time Series Analysis Important?**  
- Helps in forecasting future trends ğŸ“‰  
- Identifies patterns (seasonality, trends) ğŸ”„  
- Used in machine learning for predictive analytics  

---

## **ğŸ”¹ 2. Date-Time Handling in Pandas**  

### **ğŸ”¹ 2.1: Converting Strings to DateTime (`pd.to_datetime()`)**  
Pandas provides `pd.to_datetime()` to convert **strings** or **numbers** into **datetime format**.

#### âœ… **Example: Converting a String to DateTime**
```python
import pandas as pd

# Creating a sample dataset
data = {'Date': ['2024-01-01', '2024-02-15', '2024-03-10']}
df = pd.DataFrame(data)

# Convert string dates to datetime
df['Date'] = pd.to_datetime(df['Date'])
print(df.dtypes)
```

#### **ğŸ“ Output:**
```
Date    datetime64[ns]
dtype: object
```
âœ”ï¸ Now, we can **perform date-based operations** (sorting, filtering, etc.).  

---

### **ğŸ”¹ 2.2: Creating a Date Range**
We can generate a sequence of dates using `pd.date_range()`.

#### âœ… **Example: Creating a Monthly Date Range**
```python
date_range = pd.date_range(start='2024-01-01', periods=6, freq='M')
print(date_range)
```
âœ”ï¸ **`freq='M'`** generates a **monthly** sequence.  
âœ”ï¸ Other frequencies:  
  - `'D'` â†’ Daily  
  - `'W'` â†’ Weekly  
  - `'H'` â†’ Hourly  

---

## **ğŸ”¹ 3. Time-Based Indexing and Slicing**  
### **ğŸ”¹ 3.1: Setting a Date Column as Index**  
Time series analysis requires **date-time indexing**.

#### âœ… **Example: Setting a Date Column as Index**
```python
# Sample time series data
data = {'Date': pd.date_range(start='2024-01-01', periods=5, freq='D'),
        'Sales': [200, 220, 250, 230, 240]}

df = pd.DataFrame(data)

# Set Date column as index
df.set_index('Date', inplace=True)
print(df)
```

#### **ğŸ“ Output:**
```
            Sales
Date             
2024-01-01   200
2024-01-02   220
2024-01-03   250
2024-01-04   230
2024-01-05   240
```

---

### **ğŸ”¹ 3.2: Time-Based Slicing**
We can **filter** rows based on date ranges.

#### âœ… **Example: Filtering Data by Date**
```python
# Get data for a specific date range
df_filtered = df.loc['2024-01-02':'2024-01-04']
print(df_filtered)
```

âœ”ï¸ **Uses the index (Date) for filtering**  
âœ”ï¸ Works similarly to **row slicing in Pandas**  

---

## **ğŸ”¹ 4. Resampling Time Series Data (`resample()`)**  
âœ”ï¸ **Resampling** changes the frequency of time series data.  
âœ”ï¸ **Use cases:**  
  - **Upsampling** (increase frequency, e.g., daily â†’ hourly)  
  - **Downsampling** (reduce frequency, e.g., daily â†’ monthly)  

### **ğŸ”¹ 4.1: Downsampling (Aggregating Data by Month)**
```python
df_resampled = df.resample('M').sum()  # Monthly sales sum
print(df_resampled)
```
âœ”ï¸ **`'M'` â†’ Monthly aggregation**  
âœ”ï¸ Aggregation functions: `.sum()`, `.mean()`, `.max()`, etc.  

---

## **ğŸ”¹ 5. Rolling and Moving Averages**  
ğŸ“Œ **What is a Moving Average?**  
A **moving average** smooths fluctuations by calculating the **average of a window of past values**.  

### **ğŸ”¹ 5.1: Simple Moving Average (SMA)**
```python
df['SMA_3'] = df['Sales'].rolling(window=3).mean()
print(df)
```
âœ”ï¸ **`window=3`** means **average of 3 previous days**.  

---

### **ğŸ”¹ 5.2: Exponential Moving Average (EMA)**
âœ”ï¸ **EMA gives more weight to recent values** than SMA.  
```python
df['EMA_3'] = df['Sales'].ewm(span=3, adjust=False).mean()
print(df)
```

---

## **ğŸ”¹ 6. Summary**  
âœ… **Date-Time Handling**: `pd.to_datetime()`, `pd.date_range()`  
âœ… **Time-Based Indexing**: Setting date as index, slicing  
âœ… **Resampling Data**: Using `.resample()` to change frequency  
âœ… **Rolling & Moving Averages**: `rolling()`, `ewm()`  

---

## **ğŸ”¹ 7. Assignment**  
ğŸ“Œ **Task 1:** Convert a string column to DateTime and set it as the index  
ğŸ“Œ **Task 2:** Resample data to weekly frequency and compute the sum  
ğŸ“Œ **Task 3:** Apply a 5-day moving average on a time series dataset  

---
